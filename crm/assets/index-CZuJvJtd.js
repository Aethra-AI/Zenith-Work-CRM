import{r as t,j as a,B as s,T as h,b as n,m as l}from"./index-wWkkK0I8.js";import{d as x}from"./dayjs.min-IkiAssJO.js";import{a as g}from"./api-iZ8k4Gbm.js";import{A as v}from"./Alert-DUEIl60q.js";import{C as j}from"./Chip-Bv8XyQ3k.js";import{D as C}from"./DataGrid-BKCgzQJl.js";import"./FormControlLabel-DLpyKEEA.js";import"./TableCell-D0NB0lqR.js";const _=()=>{const[c,d]=t.useState([]),[p,o]=t.useState(!0),[r,i]=t.useState(null),u=async()=>{o(!0),i(null);try{const e=await g.get("/applications");d(e.data)}catch(e){console.error("Error al obtener las postulaciones:",e),i("No se pudieron cargar las postulaciones. Por favor, recargue la página.")}finally{o(!1)}};t.useEffect(()=>{u()},[]);const m=[{field:"nombre_candidato",headerName:"Candidato",flex:2,minWidth:200,renderCell:e=>a.jsx(n,{component:l,to:`/CRM/candidates/profile/${e.row.id_afiliado}`,size:"small",variant:"text",children:e.value})},{field:"cargo_vacante",headerName:"Vacante Aplicada",flex:2,minWidth:200,renderCell:e=>a.jsx(n,{component:l,to:`/CRM/vacancies/${e.row.id_vacante}/pipeline`,size:"small",variant:"text",color:"secondary",children:e.value})},{field:"estado",headerName:"Estado Actual",flex:1,minWidth:150,renderCell:e=>{const f={Recibida:"info","En Proceso":"secondary","En Entrevista":"warning",Rechazado:"error",Contratado:"success"};return a.jsx(j,{label:e.value,color:f[e.value]||"default",size:"small"})}},{field:"fecha_aplicacion",headerName:"Fecha de Postulación",flex:1,minWidth:180,valueFormatter:e=>x(e.value).format("DD [de] MMMM, YYYY")}];return a.jsxs(s,{p:3.5,children:[a.jsx(h,{variant:"h4",gutterBottom:!0,children:"Todas las Postulaciones"}),r&&a.jsx(v,{severity:"error",sx:{mt:2,mb:2},children:r}),a.jsx(s,{sx:{height:"calc(100vh - 220px)",width:"100%"},children:a.jsx(C,{rows:c,columns:m,loading:p,getRowId:e=>e.id_postulacion,initialState:{pagination:{paginationModel:{page:0,pageSize:25}},sorting:{sortModel:[{field:"fecha_aplicacion",sort:"desc"}]}},pageSizeOptions:[10,25,50],disableRowSelectionOnClick:!0})})]})};export{_ as default};
