import{j as e,T as r,L as I,r as n,B as h,C as w,I as g,S as v,a as k,P as A,b as S}from"./index-CneDM4Ge.js";import{a as b}from"./api-B5d2cEzN.js";import{G as p}from"./Grid-BsvPrKN7.js";import{C as f,a as y}from"./CardContent-CSp7H4OX.js";import{d as m}from"./dayjs.min-CjbwgsyB.js";import"./es-DLgFXshb.js";import{T,a as P,b as z,c as C,d as M}from"./TableRow-D3X7karQ.js";import{T as d}from"./TableCell-DcaknG7r.js";const E=()=>e.jsxs(r,{mt:.5,px:1,pb:{xs:3,md:0},color:"text.secondary",variant:"body2",sx:{textAlign:{xs:"center",md:"right"}},letterSpacing:.5,fontWeight:500,children:["Made with ❤️ by"," ",e.jsx(I,{href:"https://themewagon.com/",target:"_blank",rel:"noreferrer",children:"ThemeWagon"})]}),B=()=>{const[s,u]=n.useState(null),[j,a]=n.useState(!0),[c,l]=n.useState(null);return n.useEffect(()=>{(async()=>{try{a(!0),l(null);const i=await b.get("/reports/kpi");u(i.data)}catch(i){console.error("Error al obtener los KPIs del dashboard:",i),l("No se pudieron cargar las estadísticas.")}finally{a(!1)}})()},[]),j?e.jsx(h,{display:"flex",justifyContent:"center",alignItems:"center",height:120,children:e.jsx(w,{})}):c?e.jsx(r,{color:"error",children:c}):e.jsxs(p,{container:!0,spacing:3.5,children:[e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(f,{sx:{bgcolor:"primary.main",color:"common.white"},children:e.jsxs(y,{children:[e.jsx(g,{icon:"ph:user-plus-fill",fontSize:32}),e.jsx(r,{variant:"h4",mt:1,children:(s==null?void 0:s.nuevos_candidatos_hoy)??0}),e.jsx(r,{variant:"body2",children:"Nuevos Candidatos (Hoy)"})]})})}),e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(f,{sx:{bgcolor:"secondary.main",color:"common.white"},children:e.jsxs(y,{children:[e.jsx(g,{icon:"solar:case-bold",fontSize:32}),e.jsx(r,{variant:"h4",mt:1,children:(s==null?void 0:s.vacantes_activas)??0}),e.jsx(r,{variant:"body2",children:"Vacantes Activas"})]})})}),e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(f,{sx:{bgcolor:"warning.main",color:"common.white"},children:e.jsxs(y,{children:[e.jsx(g,{icon:"ph:calendar-check-fill",fontSize:32}),e.jsx(r,{variant:"h4",mt:1,children:(s==null?void 0:s.entrevistas_programadas_semana)??0}),e.jsx(r,{variant:"body2",children:"Entrevistas (Semana)"})]})})}),e.jsx(p,{item:!0,xs:12,sm:6,md:3,children:e.jsx(f,{sx:{bgcolor:"success.main",color:"common.white"},children:e.jsxs(y,{children:[e.jsx(g,{icon:"fa6-solid:handshake",fontSize:32}),e.jsx(r,{variant:"h4",mt:1,children:(s==null?void 0:s.total_contratados_mes)??0}),e.jsx(r,{variant:"body2",children:"Contratados (Mes)"})]})})})]})};m.locale("es");const R=()=>{const[s,u]=n.useState([]),[j,a]=n.useState(!0),[c,l]=n.useState(null);return n.useEffect(()=>{(async()=>{try{a(!0),l(null);const t=(await b.get("/interviews")).data.filter(x=>m(x.fecha_hora).isAfter(m())).sort((x,_)=>m(x.fecha_hora).valueOf()-m(_.fecha_hora).valueOf());u(t)}catch(i){console.error("Error al obtener próximas entrevistas:",i),l("No se pudieron cargar las entrevistas.")}finally{a(!1)}})()},[]),j?e.jsx(h,{display:"flex",justifyContent:"center",alignItems:"center",height:100,children:e.jsx(w,{sx:{color:"white"}})}):c?e.jsx(r,{color:"error",children:c}):s.length===0?e.jsx(r,{sx:{color:"grey.300",textAlign:"center"},children:"No hay entrevistas programadas."}):e.jsx(v,{spacing:2,children:s.map(o=>e.jsx(f,{sx:{bgcolor:"rgba(255, 255, 255, 0.1)"},children:e.jsx(y,{children:e.jsxs(v,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(k,{sx:{bgcolor:"primary.main"},children:e.jsx(g,{icon:"ph:calendar-check-fill"})}),e.jsxs(h,{children:[e.jsx(r,{variant:"body1",fontWeight:"bold",color:"common.white",children:o.nombre_candidato}),e.jsx(r,{variant:"body2",color:"grey.300",children:o.cargo_vacante}),e.jsx(r,{variant:"caption",color:"grey.300",children:m(o.fecha_hora).format("dddd, D [de] MMMM, h:mm A")})]})]})})},o.id_entrevista))})},D=()=>{const[s,u]=n.useState([]),[j,a]=n.useState(!0),[c,l]=n.useState(null),o=async()=>{try{a(!0),l(null);const t=await b.get("/application-requests");u(t.data)}catch(t){console.error("Error al obtener solicitudes pendientes:",t),l("No se pudieron cargar las solicitudes.")}finally{a(!1)}};n.useEffect(()=>{o()},[]);const i=async(t,x)=>{console.log(`Acción: ${x} en solicitud con ID: ${t}`);try{await b.post(`/process-request/${t}`,{action:x}),o()}catch(_){console.error(`Error al ${x} la solicitud:`,_)}};return j?e.jsx(h,{display:"flex",justifyContent:"center",alignItems:"center",p:3,children:e.jsx(w,{})}):c?e.jsx(r,{color:"error",children:c}):e.jsxs(h,{children:[e.jsx(r,{variant:"h6",gutterBottom:!0,children:"Solicitudes de Postulación Pendientes"}),s.length===0?e.jsx(r,{children:"No hay solicitudes pendientes por revisar."}):e.jsx(T,{component:A,children:e.jsxs(P,{sx:{minWidth:650},"aria-label":"simple table",size:"small",children:[e.jsx(z,{children:e.jsxs(C,{children:[e.jsx(d,{children:"Candidato"}),e.jsx(d,{children:"Vacante"}),e.jsx(d,{children:"Fecha de Solicitud"}),e.jsx(d,{align:"right",children:"Acciones"})]})}),e.jsx(M,{children:s.map(t=>e.jsxs(C,{children:[e.jsx(d,{component:"th",scope:"row",children:t.nombre_candidato}),e.jsx(d,{children:t.cargo_vacante}),e.jsx(d,{children:m(t.fecha_solicitud).format("DD/MM/YYYY")}),e.jsxs(d,{align:"right",children:[e.jsx(S,{variant:"contained",color:"success",size:"small",sx:{mr:1},onClick:()=>i(t.id_solicitud,"approve"),children:"Aprobar"}),e.jsx(S,{variant:"contained",color:"error",size:"small",onClick:()=>i(t.id_solicitud,"decline"),children:"Rechazar"})]})]},t.id_solicitud))})]})})]})},F=()=>e.jsxs(v,{direction:{xs:"column",lg:"row"},children:[e.jsxs(v,{p:3.5,spacing:3.5,direction:"column",flexGrow:1,children:[e.jsx(r,{variant:"h4",gutterBottom:!0,children:"Resumen del Proceso de Reclutamiento"}),e.jsx(B,{}),e.jsx(D,{}),e.jsx(h,{display:{xs:"none",lg:"block"},children:e.jsx(E,{})})]}),e.jsx(h,{width:{xs:1,lg:420},minWidth:{lg:420},height:{xs:"auto",lg:"calc(100vh - 90px)"},overflow:"auto",bgcolor:"info.main",position:"sticky",top:90,children:e.jsxs(v,{p:3.5,spacing:3.5,width:1,direction:"column",children:[e.jsx(r,{variant:"h6",color:"white",gutterBottom:!0,children:"Próximas Entrevistas"}),e.jsx(R,{})]})}),e.jsx(h,{display:{xs:"block",lg:"none"},children:e.jsx(E,{})})]});export{F as default};
