import{X as k,Y as A,r as p,j as t,B as I,S as W,T as f,b as N,I as Y,m as _}from"./index-CneDM4Ge.js";import{d as x}from"./dayjs.min-CjbwgsyB.js";import"./es-DLgFXshb.js";import{a as $}from"./api-B5d2cEzN.js";import{A as z}from"./Alert-C8RQLuSY.js";import{D}from"./DataGrid-CY5-6y4y.js";import"./Chip-s5fVDQVL.js";import"./FormControlLabel-VoaC58ir.js";import"./TableCell-DcaknG7r.js";var B={exports:{}};(function(y,S){(function(i,d){y.exports=d()})(k,function(){return function(i,d,s){i=i||{};var n=d.prototype,u={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function h(r,a,c,g){return n.fromToBase(r,a,c,g)}s.en.relativeTime=u,n.fromToBase=function(r,a,c,g,T){for(var j,v,w,M=c.$locale().relativeTime||u,b=i.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],R=b.length,m=0;m<R;m+=1){var o=b[m];o.d&&(j=g?s(r).diff(c,o.d,!0):c.diff(r,o.d,!0));var l=(i.rounding||Math.round)(Math.abs(j));if(w=j>0,l<=o.r||!o.r){l<=1&&m>0&&(o=b[m-1]);var C=M[o.l];T&&(l=T(""+l)),v=typeof C=="string"?C.replace("%d",l):C(l,a,o.l,w);break}}if(a)return v;var E=w?M.future:M.past;return typeof E=="function"?E(v):E.replace("%s",v)},n.to=function(r,a){return h(r,a,this,!0)},n.from=function(r,a){return h(r,a,this)};var e=function(r){return r.$u?s.utc():s()};n.toNow=function(r){return this.to(e(this),r)},n.fromNow=function(r){return this.from(e(this),r)}}})})(B);var P=B.exports;const G=A(P);x.extend(G);x.locale("es");const Q=()=>{const[y,S]=p.useState([]),[i,d]=p.useState(!0),[s,n]=p.useState(null),u=async()=>{d(!0),n(null);try{const e=await $.get("/interviews");S(e.data)}catch(e){console.error("Error al obtener las entrevistas:",e),n("No se pudieron cargar las entrevistas. Por favor, recargue la página.")}finally{d(!1)}};p.useEffect(()=>{u()},[]);const h=[{field:"nombre_candidato",headerName:"Candidato",flex:1.5,minWidth:180,renderCell:e=>t.jsx(N,{component:_,to:`/CRM/candidates/profile/${e.row.id_afiliado}`,size:"small",variant:"text",children:e.value})},{field:"cargo_vacante",headerName:"Vacante",flex:1.5,minWidth:180,renderCell:e=>t.jsx(N,{component:_,to:`/CRM/vacancies/${e.row.id_vacante}/pipeline`,size:"small",variant:"text",color:"secondary",children:e.value})},{field:"fecha_hora",headerName:"Fecha y Hora",flex:1.5,minWidth:220,renderCell:e=>{const r=x(e.value),a=r.isBefore(x());return t.jsxs(I,{children:[t.jsx(f,{variant:"body2",color:a?"text.secondary":"text.primary",children:r.format("dddd, D [de] MMMM, YYYY")}),t.jsxs(f,{variant:"caption",color:a?"text.secondary":"primary.main",children:[r.format("h:mm A")," (",r.fromNow(),")"]})]})}},{field:"entrevistador",headerName:"Entrevistador",flex:1,minWidth:150},{field:"resultado",headerName:"Resultado",flex:1,minWidth:120,renderCell:e=>e.value?t.jsx(f,{variant:"body2",children:e.value}):t.jsx(f,{variant:"body2",color:"text.secondary",children:t.jsx("em",{children:"Pendiente"})})}];return t.jsxs(I,{p:3.5,children:[t.jsxs(W,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:3,children:[t.jsx(f,{variant:"h4",children:"Gestión de Entrevistas"}),t.jsx(N,{variant:"contained",startIcon:t.jsx(Y,{icon:"mdi:calendar-plus"}),onClick:()=>console.log("Abrir modal para agendar entrevista"),children:"Agendar Entrevista"})]}),s&&t.jsx(z,{severity:"error",sx:{mt:2,mb:2},children:s}),t.jsx(I,{sx:{height:"calc(100vh - 220px)",width:"100%"},children:t.jsx(D,{rows:y,columns:h,loading:i,getRowId:e=>e.id_entrevista,initialState:{pagination:{paginationModel:{page:0,pageSize:25}},sorting:{sortModel:[{field:"fecha_hora",sort:"desc"}]}},pageSizeOptions:[10,25,50],disableRowSelectionOnClick:!0})})]})};export{Q as default};
